<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Product Categories</title>
  <style>
    :root {
      --accent: #DAD2FF;
      --primary: #56388C;
      --light-bg: #f4f9f6;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background: var(--light-bg);
      display: flex;
      overflow-y: auto;
    }

    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 60px;
      height: 100%;
      background: var(--primary);
      overflow: hidden;
      transition: width 0.3s ease;
      z-index: 1001;
    }

    .sidebar:hover {
      width: 200px;
    }

    .sidebar .icon {
      text-align: center;
      font-size: 24px;
      color: white;
      padding: 20px 0;
    }

    .sidebar ul {
      list-style: none;
      padding: 0;
      margin-top: 30px;
      display: none;
    }

    .sidebar:hover ul {
      display: block;
    }

    .sidebar ul li {
      padding: 12px 20px;
    }

    .sidebar ul li a {
      color: white;
      text-decoration: none;
      display: block;
      padding: 7px;
    }

    .sidebar ul li a:hover {
      background: var(--accent);
      border-radius: 4px;
      color: black;
    }

    .main-content {
      margin-left: 60px;
      padding: 30px;
      width: 100%;
    }

    .sidebar:hover ~ .main-content {
      margin-left: 200px;
      transition: margin-left 0.3s ease;
    }

    h1 {
      color: var(--primary);
      margin-bottom: 20px;
    }

    .brand-banner-section {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
    }

    .brand-section {
      flex: 1;
      min-width: 300px;
    }

    .brand-title {
      font-size: 24px;
      margin-bottom: 10px;
      color: #333;
    }

    .category-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .category-item {
      background: white;
      padding: 12px 18px;
      border-radius: 6px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
      text-decoration: none;
      color: black;
    }

    .category-item:hover {
      transform: translateY(-2px);
      background: var(--accent);
    }

    .banner-section {
      flex: 1;
      min-width: 300px;
      height: 180px;
      background-image: url('/static/images/banner.jpg');
      background-size: cover;
      background-position: center;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .featured-products {
      margin-top: 60px;
    }

    .featured-title {
      font-size: 24px;
      margin-bottom: 20px;
      color: #333;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .product-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: transform 0.2s;
      text-decoration: none;
      color: inherit;
    }

    .product-card:hover {
      transform: translateY(-5px);
    }

    .product-image {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .product-info {
      padding: 15px;
    }

    .product-name {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 8px;
      color: var(--primary);
    }

    .product-price {
      font-size: 16px;
      color: #555;
    }

    .hh {
      color: var(--primary);
      font-size: 26px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <div class="icon">☰</div>
  <ul>
    <li><a href="{{ url_for('home') }}">Home</a></li>
    <li><a href="{{ url_for('edit_profile') }}">Profile</a></li>
    <li><a href="/contact">Contact</a></li>
    <li><a href="{{ url_for('logout') }}">Log out</a></li>
    <li><a href="{{ url_for('cart') }}">Cart</a></li>
  </ul>
</div>

<!-- Main Content -->
<div class="main-content">
  <h1>Product Categories</h1>

  <!-- Brand & Banner Row -->
  <div class="brand-banner-section">
    <!-- Brand Categories -->
    <div class="brand-section">
      <div class="brand-title">Smartphones</div>
      <div class="category-list">
        <a href="{{ url_for('search') }}?q=Jordan" class="category-item">Apple</a>
        <a href="{{ url_for('search') }}?q=Redmi" class="category-item">Redmi</a>
        <a href="{{ url_for('search') }}?q=Oppo" class="category-item">Oppo</a>
        <a href="{{ url_for('search') }}?q=Realme" class="category-item">Realme</a>
        <a href="{{ url_for('search') }}?q=Vivo" class="category-item">Vivo</a>
        <a href="{{ url_for('search') }}?q=Iqoo" class="category-item">Iqoo</a>
        <a href="{{ url_for('search') }}?q=Poco" class="category-item">Poco</a>
      </div>

      <div class="brand-title" style="margin-top: 20px;">Headphones & Earbudes</div>
      <div class="category-list">
        <a href="{{ url_for('search') }}?q=Boat" class="category-item">Boat</a>
        <a href="{{ url_for('search') }}?q=Jbl" class="category-item">Jbl</a>
        <a href="{{ url_for('search') }}?q=Apple" class="category-item">Apple</a>
        <a href="{{ url_for('search') }}?q=Realme" class="category-item">Realme</a>
      </div>

      <div class="brand-title" style="margin-top: 20px;">Fashon</div>
      <div class="category-list">
        <a href="{{ url_for('search') }}?Shirt" class="category-item">T-Shirt</a>
        <a href="{{ url_for('search') }}?q=Purse" class="category-item">Purse</a>
        <a href="{{ url_for('search') }}?q=Cosmetics" class="category-item">Cosmetics</a>
        <a href="{{ url_for('search') }}?q=Pants" class="category-item">Pants</a>
      </div>

      <div class="brand-title" style="margin-top: 20px;">Electronics</div>
      <div class="category-list">
        <a href="{{ url_for('search') }}?q=Laptops" class="category-item">Laptops</a>
        <a href="{{ url_for('search') }}?q=Smart Watches" class="category-item">Smart Watches</a>
        <a href="{{ url_for('search') }}?q=Cameras" class="category-item">Cameras</a>
        <a href="{{ url_for('search') }}?q=Speakers" class="category-item">Speakers</a>
      </div>
    </div>

    <!-- Banner -->
    <div class="banner-section"></div>
  </div>

  <!-- Featured Products by Category -->
  <div class="featured-products" id="category-container">
    <h3 class="hh">Top products from every category</h3>
    <!-- Dynamic content inserted by JavaScript -->
  </div>
</div>

<!-- Load and Render Products -->
<script>
  fetch('/static/data/products.json')
    .then(response => response.json())
    .then(data => {
      const container = document.getElementById('category-container');

      Object.entries(data).forEach(([category, products]) => {
        const topFive = products.slice(0, 5);

        const section = document.createElement('div');
        section.className = 'category-section';
        section.style.marginBottom = '40px';

        const productCards = topFive.map(product => `
          <a href="/product?name=${encodeURIComponent(product.name)}" class="product-card">
            <img src="/static/${product.image}" alt="${product.name}" class="product-image" />
            <div class="product-info">
              <div class="product-name">${product.name}</div>
              <div class="product-price">₹${Number(product.price).toLocaleString()}</div>
            </div>
          </a>
        `).join('');

        section.innerHTML = `
          <div class="featured-title">${category}</div>
          <div class="product-grid">
            ${productCards}
          </div>
        `;

        container.appendChild(section);
      });
    })
    .catch(error => console.error('Error loading products:', error));
</script>

</body>
</html>
